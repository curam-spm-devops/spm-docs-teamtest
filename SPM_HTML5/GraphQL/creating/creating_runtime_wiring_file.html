<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en"><head><meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2022"><meta name="generator" content="DITA-OT"><title>Configuring the runtime wiring for APIs</title><link rel="stylesheet" type="text/css" href="../../commonltr.css"><link rel="stylesheet" type="text/css" href="../../dita-ot-doc.css"></head><body id="configuring-the-runtime-wiring-for-apis"><nav class="toc" role="navigation"><ul><li><a href="../../spm_welcome.html">IBM CÃºram Social Program Management  8.0.0, 8.0.1, and 8.0.2</a></li><li><a href="../../spm_transition.html">Documentation updates from July 1 2022</a></li><li><a href="../../spm_prod_overview_toc.html">Product Overview</a></li><li><a href="../../glossary/glossary.html">Glossary</a></li><li><a href="../../common/ctr_deploying.html">Deploying Social Program Management</a><ul></ul></li><li><a href="../../GraphQL/summary_graphql.html">GraphQL</a></li></ul></nav><main role="main"><article role="article" aria-labelledby="ariaid-title1"><h1 class="title topictitle1" id="ariaid-title1">Configuring the runtime wiring for APIs</h1><div class="body"><p class="p">Runtime wiring is required to link an API that is defined in the schema to an implementation in a data fetcher class. The details are defined in a runtime wiring configuration file.</p></div><article class="topic nested1" aria-labelledby="ariaid-title2" id="about-this-task"><h2 class="title topictitle2" id="ariaid-title2">About this task</h2><div class="body"><p class="p">The method indicates to the server the data fetcher to start at run time when a query is received, as defined in the runtime wiring configuration file.</p></div></article><article class="topic nested1" aria-labelledby="ariaid-title3" id="procedure"><h2 class="title topictitle2" id="ariaid-title3">Procedure</h2><div class="body"></div><article class="topic nested2" aria-labelledby="ariaid-title4" id="creating-a-new-runtime-wiring-configuration-file"><h3 class="title topictitle3" id="ariaid-title4">Creating a new runtime wiring configuration file</h3><div class="body"><p class="p">Only one runtime wiring configuration file is added per server component.</p><p class="p">Where you do not have a runtime wiring configuration file in your custom component, the following steps outline how to create one:</p><ol class="ol"><li class="li"><p class="p">Create a new <code class="ph codeph">runtime_wiring.yaml</code> file in your custom component in the location <code class="ph codeph">%CURAM_DIR%/EJBServer/components/&lt;COMPONENT_NAME&gt;/rest/graphql/config/runtime_wiring.yaml</code></p><p class="p">where:</p><ul class="ul"><li class="li"><p class="p"><code class="ph codeph">%CURAM_DIR%</code> is the Social Program Management installation directory, which by default is <code class="ph codeph">C:\IBM\Curam\Development</code></p></li><li class="li"><p class="p"><code class="ph codeph">&lt;COMPONENT_NAME&gt;</code> is the name of your custom component.</p></li></ul></li><li class="li"><p class="p">Add a top level <code class="ph codeph">Query</code> section if none exists.</p></li></ol></div></article><article class="topic nested2" aria-labelledby="ariaid-title5" id="adding-an-entry-to-the-runtime-wiring-configuration-file"><h3 class="title topictitle3" id="ariaid-title5">Adding an entry to the runtime wiring configuration file</h3><div class="body"><p class="p">The following steps outline how to add an entry to the runtime wiring configuration file:</p><ol class="ol"><li class="li"><p class="p">Add an entry to the <code class="ph codeph">Query</code> section to define the data fetcher to be wired to the API. The following code provides an example:</p><pre class="pre codeblock"><code>Query:
  - name: &lt;the name of the API, as defined in the Query type in the schema&gt;
    data_fetcher: &lt;the fully qualified name of the data fetcher java class&gt;</code></pre></li><li class="li"><p class="p">Optionally, further data fetchers can be wired to individual attributes within an API response object. Where none exists, add a top- level <code class="ph codeph">FieldLevelWiring</code> section.</p><p class="p">Add an entry to the <code class="ph codeph">FieldLevelWiring</code> section to define the data fetcher to be wired to a particular attribute in an object type defined in the schema. The following code provides an example:</p><pre class="pre codeblock"><code>FieldLevelWiring:
  - object_type: &lt;the name of object type, as defined in the schema&gt;
    field:  &lt;the name of the field within the object that the data fetcher applies to&gt;
    data_fetcher: &lt;the fully qualified name of the data fetcher java class&gt;</code></pre></li><li class="li"><p class="p">At build time, the <code class="ph codeph">runtime_wiring.yaml</code> files from all server components are merged into a single <code class="ph codeph">runtime_wiring.yaml</code> file.
Where duplicate entries are found for queries or fields, the entry in the component with the higher server component order takes precedence. The method permits a different data fetcher to be wired to an existing API, although the data fetcher must match the
type definitions of the API in the schema.</p></li></ol></div></article></article><article class="topic nested1" aria-labelledby="ariaid-title6" id="example"><h2 class="title topictitle2" id="ariaid-title6">Example</h2><div class="body"><p class="p">In example 2 in the <a class="xref" href="creating_data_fetcher_file.html">Creating a data fetcher class</a> page, the <code class="ph codeph">readIntegratedCase</code> API is linked to the <code class="ph codeph">IntegratedCaseDataFetcher</code>. A list of benefits is returned as part of the <code class="ph codeph">DOMIntegratedCase</code> object and the <code class="ph codeph">benefits</code> field is wired to its own data fetcher called <code class="ph codeph">BenefitListDataFetcher</code>.</p><p class="p">Generally, only fields that are linked to nested lists or objects have their own data fetchers. You can, however, also wire an individual field to its own data fetcher.</p><pre class="pre codeblock"><code>Query:
  - name: readIntegratedCase
    data_fetcher: curam.core.graphql.datafetcher.IntegratedCaseDataFetcher
FieldLevelWiring:
  - object_type: DOMIntegratedCase
    field:  benefits
    data_fetcher: curam.core.graphql.datafetcher.BenefitListDataFetcher</code></pre><p class="p">A further example of runtime wiring is in the <code class="ph codeph">%CURAM_DIR%/EJBServer/components/core/rest/graphql/config/runtime_wiring.yaml</code> file.</p></div></article></article></main></body></html>