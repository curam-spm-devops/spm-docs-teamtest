<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en"><head><meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2022"><meta name="generator" content="DITA-OT"><title>Building and deploying GraphQL APIs on Tomcat</title><link rel="stylesheet" type="text/css" href="../../commonltr.css"><link rel="stylesheet" type="text/css" href="../../dita-ot-doc.css"></head><body id="building-and-deploying-graphql-apis-on-tomcat"><nav class="toc" role="navigation"><ul><li><a href="../../spm_welcome.html">IBM CÃºram Social Program Management  8.0.0, 8.0.1, and 8.0.2</a></li><li><a href="../../spm_transition.html">Documentation updates from July 1 2022</a></li><li><a href="../../spm_prod_overview_toc.html">Product Overview</a></li><li><a href="../../glossary/glossary.html">Glossary</a></li><li><a href="../../common/ctr_deploying.html">Deploying Social Program Management</a><ul></ul></li><li><a href="../../GraphQL/summary_graphql.html">GraphQL</a></li></ul></nav><main role="main"><article role="article" aria-labelledby="ariaid-title1"><h1 class="title topictitle1" id="ariaid-title1">Building and deploying GraphQL APIs on Tomcat</h1><div class="body"><p class="p">Use specific Ant targets to build and deploy the GraphQL server on Tomcat.</p></div><article class="topic nested1" aria-labelledby="ariaid-title2" id="about-this-task"><h2 class="title topictitle2" id="ariaid-title2">About this task</h2><div class="body"><p class="p">The GraphQL server is built into the REST application and includes the GraphQL APIs and other GraphQL artifacts. You must build the full REST application at least one time. You can use a separate GraphQL build target to update the GraphQL artifacts only,
without the need to rebuild the full REST application.</p></div></article><article class="topic nested1" aria-labelledby="ariaid-title3" id="procedure"><h2 class="title topictitle2" id="ariaid-title3">Procedure</h2><div class="body"><p class="p">The following steps outline how to build the full REST application at development time:</p><ol class="ol"><li class="li"><p class="p">Set your <code class="ph codeph">$CATALINA_HOME</code> environment variable to the location of your Tomcat installation directory, for example <code class="ph codeph">export CATALINA_HOME=%DEV_ENV_HOME%/tomcat</code>.
<strong class="ph b">Note:</strong> If you do not set your <code class="ph codeph">$CATALINA_HOME</code> environment variable to the location of your Tomcat installation directory, the REST build target finishes successfully. However, a warning message is displayed in the console that indicates the variable was not
set. As a result, nothing is built.</p></li><li class="li"><p class="p">From <code class="ph codeph">EJBServer</code>, run <code class="ph codeph">build rest</code>. The step builds the REST development application in the <code class="ph codeph">%CURAM_DIR%/EJBServer/build/RestProject/DevApp</code> directory. The following list outlines the step that are performed in addition to building the REST APIs:</p><ul class="ul"><li class="li"><p class="p">It merges any schema files from the server components that match the directory structure <code class="ph codeph">/EJBServer/components/&lt;COMPONENT_NAME&gt;/rest/graphql/config/schema.graphqls</code>.</p></li><li class="li"><p class="p">It merges any runtime wiring files from the server components that match the directory structure <code class="ph codeph">/EJBServer/components/&lt;COMPONENT_NAME&gt;/rest/graphql/config/runtime_wiring.yaml</code>. If duplicate entries are found in different files, the entries in the file
with the higher server component order takes precedence.</p></li><li class="li"><p class="p">It compiles any data fetcher java classes from the server components are found in the directory pattern <code class="ph codeph">%CURAM_DIR%/EJBServer/components/&lt;COMPONENT_NAME&gt;/source/curam/&lt;PACKAGE_NAME&gt;/graphql/datafetcher/&lt;class_name&gt;.java</code>.</p></li></ul></li></ol></div><article class="topic nested2" aria-labelledby="ariaid-title4" id="changing-graphql-artifacts"><h3 class="title topictitle3" id="ariaid-title4">Changing GraphQL artifacts</h3><div class="body"><p class="p">If you change any of the GraphQL artifacts only, that is, a data fetcher class, a schema entry, or a runtime wiring entry, then from <code class="ph codeph">EJBServer</code>, run <code class="ph codeph">build graphql</code>. Running that build target updates the GraphQL artifacts only in the built REST application.</p></div></article></article></article></main></body></html>