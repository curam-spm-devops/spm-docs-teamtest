<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us"><head><meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2022"><meta name="generator" content="DITA-OT"><title>Configuring the JMS connection factories</title><link rel="stylesheet" type="text/css" href="../commonltr.css"><link rel="stylesheet" type="text/css" href="../dita-ot-doc.css"></head><body id="d1e1"><nav class="toc" role="navigation"><ul><li><a href="../Deployment_WebsphereApplicationServerOnZOS/ctr_CuramDeploymentGuideForWebsphereApplicationServerOnZOS.html">Deploying on IBM  WebSphere Application Server for z/OS</a><ul><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Third1ThirdpartyTools1.html">Third-party tools</a><ul><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Db2_for_ZOS.html">IBM  Db2 for z/OS</a><ul><li><a href="../install_DevelopmentEnvironment/c_install_Installing2RemoteDbForZosConnectivity1.html">Remote IBM  Db2 for z/OS connectivity</a></li></ul></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Third1WebsphereApplicationServerForZos1.html">IBM  WebSphere Application Server for z/OS</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Third1ApacheAnt1.html">Apache Ant</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Third1JreJavaEe1.html">Java SE and Java EE</a></li></ul></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Building3BuildingEarFiles1.html">Building EAR files</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_instCur_onZOS.html">Installing IBM Cúram Social Program Management on IBM  z/OS</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Building3PropertyFiles1.html">Property files</a><ul><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Building3Bootstrapproperties1.html">Bootstrap properties</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Building3Appserverproperties1.html">AppServer properties</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Deployment3CheckingConfiguration1.html">Checking the configuration</a><ul><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration6AltJarLocations.html">Alternative crypto JAR file locations</a></li></ul></li></ul></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration6ApplicationServerConfiguration1.html">Application server configuration</a><ul><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration6WebsphereApplicationServerConfigura1.html">Configuring IBM  WebSphere Application Server for z/OS</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration6SecurityConfiguration1.html">Configuring security</a><ul><li><a href="../Deployment_WebsphereApplicationServerOnZOS/t_WEBSPHZOS_Configuration6SpecialConfigurationStepsWhenUsingI1.html">Configuring identity only and LDAP</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration6WebsphereApplicationServerUserRegis1.html">User registry</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration6LoggingAuthenticationProcess1.html">Logging the authentication process</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration6EstablishingAlternateExcludeUsernam1.html">Establishing an alternate exclude user name delimiter</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration6WebsphereApplicationServerCachingBe1.html">Application server caching behavior</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration6SecurityCustomProperties1.html">Security custom properties</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration6SecurityHardeningMeasures1.html">Security hardening measures</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration6SecurityCryptography.html">Cúram cryptography</a></li></ul></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration6StartingStoppingWebsphereServers1.html">Starting and stopping WebSphere Application Server for z/OS</a></li></ul></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Deployment3Deployment1.html">Deployment</a><ul><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Deployment3PrecompilingJsps1.html">Precompiling JSPs</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Deployment3Deployment2.html">Deploying an application</a><ul><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Deployment3InstallApplication1.html">Install an application</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Deployment3UninstallApplication1.html">Uninstall an application</a></li></ul></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Deployment3CreatingDatabase1.html">Populating the database</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Deployment3TestingDeployment1.html">Testing the deployment by logging in to the application</a></li></ul></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration5ManualWebsphereApplicationServerCon1.html">Manual application server configuration</a><ul><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration5AdministrativeConsole1.html">The administrative console</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration5ScriptingSupport1.html">Scripting support</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/t_WEBSPHZOS_Configuration5CreatingDataSourceLoginAlias1.html">Creating the data source login alias</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration5ConfigureDbForZosDataSources1.html">Configure IBM  Db2 for IBM  z/OS data sources</a><ul><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration5ConfiguringForTypeJdbcUniversalDriv1.html">Configuring for a type 4 JDBC universal driver (XA)</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration5ConfiguringForTypeJdbcUniversalDriv2.html">Configuring for a type 2 JDBC universal driver (RRS)</a></li></ul></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/t_WEBSPHZOS_Configuration5ConfigureAdministrationSecurity1.html">Configuring administration security</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration5RestartApplicationServer1.html">Restarting the application server</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/t_WEBSPHZOS_Configuration5TestDbForZosConnection1.html">Testing the IBM  Db2 for z/OS connections</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/t_WEBSPHZOS_Configuration5ConfigureUsers1.html">Configuring users</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration5SetUpSystemJaasLoginModule1.html">Setting up the system JAAS login module</a><ul><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration5AddLoginModule1.html">Adding the login module</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration5ReorderLoginModule1.html">Reordering the login module</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration5DisableCrossClusterAuthentication1.html">Disabling cross-cluster authentication</a></li></ul></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration5ServerConfiguration1.html">Configuring the server</a><ul><li><a href="../Deployment_WebsphereApplicationServerOnZOS/t_WEBSPHZOS_Configuration5ConfigureBitSupport1.html">Configure 64-bit support</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/t_WEBSPHZOS_Configuration5ConfigureYourJndiLookupPort1.html">Configure the JNDI lookup port</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/t_WEBSPHZOS_Configuration5ConfigureYourClassloaderSettings1.html">Configure ClassLoader settings</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/t_WEBSPHZOS_Configuration5ConfigureYourOrbPassByReference1.html">Configure ORB to pass by reference</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/t_WEBSPHZOS_Configuration5ConfigureYourJavaVirtualMachine1.html">Configure the Java virtual machine</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/t_WEBSPHZOS_Configuration5ConfigureTimerService1.html">Configuring the timer service</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/t_WEBSPHZOS_Configuration5SetUpPortAccess1.html">Set up the port access</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/t_WEBSPHZOS_Configuration5ConfigureSessionSecurityIntegration1.html">Configuring session security integration</a></li></ul></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/t_WEBSPHZOS_Configuration5SetupServiceIntegrationBus1.html">Configuring the Service Integration Bus</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration5JmsConfiguration1.html">Configuring JMS</a><ul><li class="active"><a href="../Deployment_WebsphereApplicationServerOnZOS/t_WEBSPHZOS_Configuration5SetupJmsConnectionFactories1.html">Configuring the JMS connection factories</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/t_WEBSPHZOS_Configuration5SetupRequiredQueues1.html">Configuring the required queues</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/t_WEBSPHZOS_Configuration5SetupRequiredTopics1.html">Configuring the required topics</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/t_WEBSPHZOS_Configuration5SetupRequiredQueueActivationSpecifi1.html">Configuring the queue activation specifications</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/t_WEBSPHZOS_Configuration5SetupRequiredTopicActivationSpecifi1.html">Configuring the topic activation specifications</a></li></ul></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration5PostConfiguration1.html">Post configuration tasks</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/t_WEBSPHZOS_Configuration5ManualApplicationDeployment1.html">Manual application deployment</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration5WebsphereNetworkDeployment1.html">Network deployment</a><ul><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration5SynchronizingChanges1.html">Synchronizing changes</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration5ConfigurationNode1.html">Configuring </a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration5DeployingOnNode1.html">Deploying on the node</a></li></ul></li></ul></li></ul></li></ul></nav><main role="main"><article role="article" aria-labelledby="ariaid-title1">
<h1 class="title topictitle1" id="ariaid-title1">Configuring the JMS connection factories</h1><div class="body taskbody">
<section><ol class="ol steps"><li class="li step stepexpand">
<span class="ph cmd">Browse to <span class="ph menucascade"><span class="ph uicontrol">Resources</span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol">JMS</span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol">JMS providers</span></span>. The appropriate scope where the JMS resources are to be defined are selected.</span>
</li><li class="li step stepexpand">
<span class="ph cmd">Select the <span class="ph uicontrol">Default messaging provider</span> link;</span>
</li><li class="li step stepexpand">
<span class="ph cmd">Select the <span class="ph uicontrol">Connection factories</span> link in the <span class="ph uicontrol">Additional
Properties</span> box;</span>
</li><li class="li step stepexpand">
<span class="ph cmd">Select <span class="ph uicontrol">New</span> and set the following fields:</span>
<div class="itemgroup info">
<ul class="ul">
<li class="li"><span class="ph uicontrol">Name</span>: CuramQueueConnectionFactory </li>
<li class="li"><span class="ph uicontrol">JNDI Name</span>: jms/CuramQueueConnectionFactory </li>
<li class="li"><span class="ph uicontrol">Description</span>: The factory for all connections to the application queues. </li>
<li class="li"><span class="ph uicontrol">Bus Name</span>: CuramBus</li>
<li class="li"><span class="ph uicontrol">Authentication alias for XA recovery</span>: Same as for the
<span class="ph tt" style="font-family: monospace">jdbc/curamdb</span> data source (for example, <var class="keyword varname">&lt;SERVERNAME&gt;</var> /dbadmin) </li>
<li class="li"><span class="ph uicontrol">Mapping-configuration alias</span>: DefaultPrinicipalMapping </li>
<li class="li"><span class="ph uicontrol">Container-managed authentication alias</span>: Same as for the Authentication
alias for XA recovery.</li>
<li class="li">Leave all other fields as default and select <span class="ph uicontrol">OK</span> to apply the changes.
</li>
</ul>
</div>
</li><li class="li step stepexpand">
<span class="ph cmd">Select <span class="ph uicontrol">New</span> and set the following fields:</span>
<div class="itemgroup info">
<ol class="ol" type="a">
<li class="li"><span class="ph uicontrol">Name</span>: CuramTopicConnectionFactory </li>
<li class="li"><span class="ph uicontrol">JNDI Name</span>: jms/CuramTopicConnectionFactory </li>
<li class="li"><span class="ph uicontrol">Description</span>: The factory for all connections to the application
queues.</li>
<li class="li"><span class="ph uicontrol">Bus Name</span>: CuramBus </li>
<li class="li"><span class="ph uicontrol">Authentication alias for XA recovery</span>: Same as for the
<span class="ph tt" style="font-family: monospace">jdbc/curamdb</span> data source (for example, <var class="keyword varname">&lt;SERVERNAME&gt;</var>/dbadmin)</li>
<li class="li"><span class="ph uicontrol">Mapping-configuration alias</span>: DefaultPrinicipalMapping </li>
<li class="li"><span class="ph uicontrol">Container-managed authentication alias</span>: Same as for the
<span class="ph tt" style="font-family: monospace">jdbc/curamdb</span> data source (for example, <var class="keyword varname">&lt;SERVERNAME&gt;/dbadmin)</var></li>
</ol>
<p class="p">Leave all other fields as default and select <span class="ph uicontrol">OK</span> to apply the changes.</p>
</div>
</li><li class="li step stepexpand">
<span class="ph cmd">Save the changes to the master configuration as described in <a class="xref" href="c_WEBSPHZOS_Configuration5DisableCrossClusterAuthentication1.html" title="The com.ibm.ws.security.webChallengeIfCustomSubjectNotFound property determines the behavior of a single sign-on LTPA Token2 login.">Disabling cross-cluster authentication</a>.</span>
</li></ol></section>
<section class="section result">
<div class="note note note_note"><span class="note__title">Note:</span> Using these manual configuration steps, you cannot correctly configure security
for the <span class="keyword">Social Program Management</span> queue and topic
connection factories. To complete this part of the configuration, you must use the <span class="ph tt" style="font-family: monospace">wsadmin</span>
tool, exit the administrative console, and follow these steps: <ol class="ol">
<li class="li">Identify the queue and topic connection factory entries in the <span class="keyword">IBM®
WebSphere® Application Server for z/OS®</span> configuration
<span class="ph filepath">resources.xml</span> file. This file is in the
<span class="ph filepath">%WAS_HOME%\profiles\&lt;profile_name&gt;\config</span> file system hierarchy,
depending on your naming conventions and the scope where you defined your JMS resources. For
instance, by using a node-level scope with a profile name of <span class="ph tt" style="font-family: monospace">AppSrv01</span>, a cell name of
<span class="ph tt" style="font-family: monospace">MyNodeCell</span> and a node name of <span class="ph tt" style="font-family: monospace">MyNode</span> you would find this file here:
<span class="ph filepath">C:\WebSphere\profiles\AppSrv01\config\cells\MyNodeCell\nodes\MyNode\resources.xml</span>.
In this file, find the <span class="ph tt" style="font-family: monospace">&lt;factories&gt;</span> entities for the
<span class="ph tt" style="font-family: monospace">CuramQueueConnectionFactory</span> and <span class="ph tt" style="font-family: monospace">CuramTopicConnectionFactory</span> and make note of the
ID for each that begins <span class="ph tt" style="font-family: monospace">J2CConnectionFactory_</span> followed by a numeric (for example,
1264085551611).</li>
<li class="li">Start the <span class="ph tt" style="font-family: monospace">wsadmin</span>
<span class="keyword">WebSphere Application Server for z/OS</span> script. In these
examples the language is JACL, so the <em class="ph i">-lang jacl</em> argument might need to be specified along
with login credentials, etc. depending on your local configuration.</li>
<li class="li">In <span class="ph tt" style="font-family: monospace">wsadmin</span> start the following commands; again, assuming node-scope definitions, a cell
name of <span class="ph tt" style="font-family: monospace">MyNodeCell</span>, and a node name of <span class="ph tt" style="font-family: monospace">MyNode</span>, the resource IDs are different in
your environment: <ol class="ol" type="a">
<li class="li">Get the node and cell identifier: <span class="ph tt" style="font-family: monospace">$AdminConfig getid /Node:MyNode</span></li>
<li class="li">Using the node and cell identifier from the previous step, combine it and the connection factory
identifier you obtained to display the connection factory: <span class="ph tt" style="font-family: monospace">$AdminTask
showSIBJMSConnectionFactory
CuramQueueConnectionFactory(cells/MyNodeCell/nodes/MyNode|resources.xml#J2CConnectionFactory_1264085551611)</span>
<p class="p">From the command output, verify that authDataAlias is not set (e.g. <span class="ph tt" style="font-family: monospace">authDataAlias=</span>),
else you're done, as shown in this sample wsadmin
output:</p><pre class="pre codeblock"><code>{password=, logMissingTransactionContext=false,
readAhead=Default, providerEndpoints=,
shareDurableSubscriptions=InCluster,
targetTransportChain=, authDataAlias=, userName=,
targetSignificance=Preferred,
shareDataSourceWithCMP=false,
nonPersistentMapping=ExpressNonPersistent,
persistentMapping=ReliablePersistent, clientID=,
jndiName=jms/CuramQueueConnectionFactory,
manageCachedHandles=false,
consumerDoesNotModifyPayloadAfterGet=false,
category=, targetType=BusMember, busName=CuramBus,
description=None,
xaRecoveryAuthAlias=crouch/databaseAlias,
temporaryTopicNamePrefix=, remoteProtocol=,
producerDoesNotModifyPayloadAfterSet=false,
connectionProximity=Bus, target=,
temporaryQueueNamePrefix=,
name=CuramQueueConnectionFactory}</code></pre></li>
<li class="li">To set the authDataAlias use the same connection factory information, for example:
<span class="ph tt" style="font-family: monospace">$AdminTask modifySIBJMSConnectionFactory
CuramQueueConnectionFactory(cells/MyNodeCell/nodes/MyNode|resources.xml#J2CConnectionFactory_1264085551611)
{-authDataAlias crouch/databaseAlias}</span></li>
<li class="li">Save the changes: <span class="ph tt" style="font-family: monospace">$AdminConfig save</span></li>
<li class="li">You can start the <span class="ph tt" style="font-family: monospace">showSIBJMSConnectionFactory</span> command to verify the change.</li>
<li class="li">Repeat the steps for the <span class="ph tt" style="font-family: monospace">CuramTopicConnectionFactory</span>.</li>
<li class="li">Exit the wsadmin session by using the <span class="ph tt" style="font-family: monospace">quit</span> command, ensuring you save your
changes.</li>
</ol></li>
</ol></div></section></div><nav role="navigation" class="related-links"><div class="familylinks"><div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration5JmsConfiguration1.html" title="Configure JMS features such as connection factories, queues and topics.">Configuring JMS</a></div></div></nav></article></main></body></html>