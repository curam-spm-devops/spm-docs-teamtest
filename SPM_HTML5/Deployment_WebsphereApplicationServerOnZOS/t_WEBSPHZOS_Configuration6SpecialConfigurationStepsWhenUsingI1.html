<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us"><head><meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2022"><meta name="generator" content="DITA-OT"><meta name="description" content="Configure IBM WebSphere Application Server for z/OS with the Ant configure target to use identity only and LDAP"><title>Configuring identity only and LDAP</title><link rel="stylesheet" type="text/css" href="../commonltr.css"><link rel="stylesheet" type="text/css" href="../dita-ot-doc.css"></head><body id="d1e1"><nav class="toc" role="navigation"><ul><li><a href="../Deployment_WebsphereApplicationServerOnZOS/ctr_CuramDeploymentGuideForWebsphereApplicationServerOnZOS.html">Deploying on IBM  WebSphere Application Server for z/OS</a><ul><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Third1ThirdpartyTools1.html">Third-party tools</a><ul><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Db2_for_ZOS.html">IBM  Db2 for z/OS</a><ul><li><a href="../install_DevelopmentEnvironment/c_install_Installing2RemoteDbForZosConnectivity1.html">Remote IBM  Db2 for z/OS connectivity</a></li></ul></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Third1WebsphereApplicationServerForZos1.html">IBM  WebSphere Application Server for z/OS</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Third1ApacheAnt1.html">Apache Ant</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Third1JreJavaEe1.html">Java SE and Java EE</a></li></ul></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Building3BuildingEarFiles1.html">Building EAR files</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_instCur_onZOS.html">Installing IBM Cúram Social Program Management on IBM  z/OS</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Building3PropertyFiles1.html">Property files</a><ul><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Building3Bootstrapproperties1.html">Bootstrap properties</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Building3Appserverproperties1.html">AppServer properties</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Deployment3CheckingConfiguration1.html">Checking the configuration</a><ul><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration6AltJarLocations.html">Alternative crypto JAR file locations</a></li></ul></li></ul></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration6ApplicationServerConfiguration1.html">Application server configuration</a><ul><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration6WebsphereApplicationServerConfigura1.html">Configuring IBM  WebSphere Application Server for z/OS</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration6SecurityConfiguration1.html">Configuring security</a><ul><li class="active"><a href="../Deployment_WebsphereApplicationServerOnZOS/t_WEBSPHZOS_Configuration6SpecialConfigurationStepsWhenUsingI1.html">Configuring identity only and LDAP</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration6WebsphereApplicationServerUserRegis1.html">User registry</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration6LoggingAuthenticationProcess1.html">Logging the authentication process</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration6EstablishingAlternateExcludeUsernam1.html">Establishing an alternate exclude user name delimiter</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration6WebsphereApplicationServerCachingBe1.html">Application server caching behavior</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration6SecurityCustomProperties1.html">Security custom properties</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration6SecurityHardeningMeasures1.html">Security hardening measures</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration6SecurityCryptography.html">Cúram cryptography</a></li></ul></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration6StartingStoppingWebsphereServers1.html">Starting and stopping WebSphere Application Server for z/OS</a></li></ul></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Deployment3Deployment1.html">Deployment</a><ul><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Deployment3PrecompilingJsps1.html">Precompiling JSPs</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Deployment3Deployment2.html">Deploying an application</a><ul><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Deployment3InstallApplication1.html">Install an application</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Deployment3UninstallApplication1.html">Uninstall an application</a></li></ul></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Deployment3CreatingDatabase1.html">Populating the database</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Deployment3TestingDeployment1.html">Testing the deployment by logging in to the application</a></li></ul></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration5ManualWebsphereApplicationServerCon1.html">Manual application server configuration</a><ul><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration5AdministrativeConsole1.html">The administrative console</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration5ScriptingSupport1.html">Scripting support</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/t_WEBSPHZOS_Configuration5CreatingDataSourceLoginAlias1.html">Creating the data source login alias</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration5ConfigureDbForZosDataSources1.html">Configure IBM  Db2 for IBM  z/OS data sources</a><ul><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration5ConfiguringForTypeJdbcUniversalDriv1.html">Configuring for a type 4 JDBC universal driver (XA)</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration5ConfiguringForTypeJdbcUniversalDriv2.html">Configuring for a type 2 JDBC universal driver (RRS)</a></li></ul></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/t_WEBSPHZOS_Configuration5ConfigureAdministrationSecurity1.html">Configuring administration security</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration5RestartApplicationServer1.html">Restarting the application server</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/t_WEBSPHZOS_Configuration5TestDbForZosConnection1.html">Testing the IBM  Db2 for z/OS connections</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/t_WEBSPHZOS_Configuration5ConfigureUsers1.html">Configuring users</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration5SetUpSystemJaasLoginModule1.html">Setting up the system JAAS login module</a><ul><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration5AddLoginModule1.html">Adding the login module</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration5ReorderLoginModule1.html">Reordering the login module</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration5DisableCrossClusterAuthentication1.html">Disabling cross-cluster authentication</a></li></ul></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration5ServerConfiguration1.html">Configuring the server</a><ul><li><a href="../Deployment_WebsphereApplicationServerOnZOS/t_WEBSPHZOS_Configuration5ConfigureBitSupport1.html">Configure 64-bit support</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/t_WEBSPHZOS_Configuration5ConfigureYourJndiLookupPort1.html">Configure the JNDI lookup port</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/t_WEBSPHZOS_Configuration5ConfigureYourClassloaderSettings1.html">Configure ClassLoader settings</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/t_WEBSPHZOS_Configuration5ConfigureYourOrbPassByReference1.html">Configure ORB to pass by reference</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/t_WEBSPHZOS_Configuration5ConfigureYourJavaVirtualMachine1.html">Configure the Java virtual machine</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/t_WEBSPHZOS_Configuration5ConfigureTimerService1.html">Configuring the timer service</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/t_WEBSPHZOS_Configuration5SetUpPortAccess1.html">Set up the port access</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/t_WEBSPHZOS_Configuration5ConfigureSessionSecurityIntegration1.html">Configuring session security integration</a></li></ul></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/t_WEBSPHZOS_Configuration5SetupServiceIntegrationBus1.html">Configuring the Service Integration Bus</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration5JmsConfiguration1.html">Configuring JMS</a><ul><li><a href="../Deployment_WebsphereApplicationServerOnZOS/t_WEBSPHZOS_Configuration5SetupJmsConnectionFactories1.html">Configuring the JMS connection factories</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/t_WEBSPHZOS_Configuration5SetupRequiredQueues1.html">Configuring the required queues</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/t_WEBSPHZOS_Configuration5SetupRequiredTopics1.html">Configuring the required topics</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/t_WEBSPHZOS_Configuration5SetupRequiredQueueActivationSpecifi1.html">Configuring the queue activation specifications</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/t_WEBSPHZOS_Configuration5SetupRequiredTopicActivationSpecifi1.html">Configuring the topic activation specifications</a></li></ul></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration5PostConfiguration1.html">Post configuration tasks</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/t_WEBSPHZOS_Configuration5ManualApplicationDeployment1.html">Manual application deployment</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration5WebsphereNetworkDeployment1.html">Network deployment</a><ul><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration5SynchronizingChanges1.html">Synchronizing changes</a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration5ConfigurationNode1.html">Configuring </a></li><li><a href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration5DeployingOnNode1.html">Deploying on the node</a></li></ul></li></ul></li></ul></li></ul></nav><main role="main"><article role="article" aria-labelledby="ariaid-title1">
<h1 class="title topictitle1" id="ariaid-title1">Configuring identity only and LDAP</h1>
<div class="body taskbody"><p class="shortdesc">Configure <span class="keyword">IBM®
WebSphere® Application Server for z/OS®</span>
with the Ant <span class="keyword cmdname">configure</span> target to use identity only and LDAP</p><section class="section context">
<p class="p">To configure <span class="keyword">WebSphere Application Server for z/OS</span> with
the Ant <span class="keyword cmdname">configure</span> target to use identity only and LDAP, set the
<var class="keyword varname">curam.security.check.identity.only</var> property to true in
<span class="ph filepath">AppServer.properties</span> before you run the Ant <span class="keyword cmdname">configure</span>
target. This step configures the CuramLoginModule behavior to be compatible with the identity only
and LDAP authentication mechanism. For a previously configured server, see the steps in <a class="xref" href="c_WEBSPHZOS_Configuration5SetUpSystemJaasLoginModule1.html" title="Application security uses a JAAS (Java Authentication and Authorization Service) login module for authentication. This login module must be configured for the DEFAULT, WEB_INBOUND and RMI_INBOUND configurations.">Set up the System JAAS Login
Module</a>. To set the corresponding <var class="keyword varname">CuramLoginModule</var>
<var class="keyword varname">check_identity_only</var> property.</p>
<p class="p">However, when you use identity only in combination with <span class="keyword">WebSphere Application Server for z/OS</span> and LDAP you might need to
perform extra manual configuration steps. perform these steps regardless of whether configuration is
done by using the <span class="keyword">WebSphere Application Server for z/OS</span>
administrative console or the Ant <span class="keyword cmdname">configure</span> target. For more information, see
<a class="xref" href="../Security/c_SECHAND_Authentication1IdentityOnlyAuthentication1.html"> Identity Only Authentication</a>.</p>
<p class="p"><strong class="ph b">Troubleshooting Identity Only and LDAP</strong></p>
<p class="p">With this combination, you might find that <span class="keyword">WebSphere Application Server for z/OS</span> fails to start successfully
because you must add a WebSphere Application Server for z/OS-generated user name to the login module
exclude list property (exclude_usernames). If the application server fails to start, there will be a
SECJ0270E error message in the <span class="ph filepath">SystemOut.log</span> file before the failure.</p>
<p class="p">Take the following steps to resolve this error:</p></section>
<section><ol class="ol steps"><li class="li step stepexpand">
<span class="ph cmd">Identify the user name that is causing application server startup to fail. Configure the login
module trace as described in <a class="xref" href="c_WEBSPHZOS_Configuration6LoggingAuthenticationProcess1.html" title="Trace entries of the CuramLoginModule authentication process can be generated in SystemOut.log and used for debugging.">Logging the authentication process</a> (in regard to the Ant
<span class="keyword cmdname">configure</span> target) or <a class="xref" href="c_WEBSPHZOS_Configuration5AddLoginModule1.html" title="Use the administration console to add the login module.">Adding the login module</a> (in regard to configuring using the administrative console), and restart the application server.
With the login module trace running, before the SECJ0270E error in the
<span class="ph filepath">SystemOut.log</span> file, the trace data identifies the failing user name with a
record like this:</span>
<div class="itemgroup info">
<figure class="fig fignone">
<pre class="pre">SystemOut     O Username: server:MyNodeCell_MyNode_CuramServer</pre>
</figure>
<p class="p">Where "MyNode" is the node name, "MyNodeCell" is the cell name, and "CuramServer" is the
WebSphere Application Server for z/OS server name. Following the login module trace data is the
error, which looks like this:</p>
<figure class="fig fignone">
<pre class="pre">SECJ0270E: Failed to get actual credentials.
   The exception is javax.security.auth.login.LoginException:
   Context: MyNodeCell/nodes/MyNode/servers/CuramServer,
   name: curamejb/LoginHome:
   First component in name curamejb/LoginHome not found.</pre>
</figure>
</div>
</li><li class="li step stepexpand">
<span class="ph cmd">Specify the failing user name in the login module exclude_usernames property in the application
server configuration. Since the application server fails to start, you cannot make this change by
using the administrative console, you must edit the <span class="keyword">WebSphere Application Server for z/OS</span> configuration file directly.
In the <span class="keyword">WebSphere Application Server for z/OS</span> configuration
file system edit <span class="ph filepath">config\cells\MyNodeCell\security.xml</span>, which has three
occurrences of the exclude_usernames property (one for each alias); for example:</span>
<div class="itemgroup info">
<figure class="fig fignone">
<pre class="pre">&lt;options xmi:id="Property_1301940482165"
   name="exclude_usernames"
   value="websphere,db2admin"
   required="false"/&gt;</pre>
</figure>
<p class="p">You must modify the three occurrences to include the newly identified user name from the trace
entry for example:</p>
<figure class="fig fignone">
<pre class="pre">&lt;options xmi:id="Property_1301940482165"
   name="exclude_usernames"
   value="websphere,db2admin,server:MyNodeCell_MyNode_CuramServer"
   required="false"/&gt;</pre>
</figure>
<p class="p">In the exclude_usernames occurrences the <span class="ph tt" style="font-family: monospace">id</span> attribute varies depending on your system
configuration. Also, he comma separator in the example value attribute represents the default
curam.security.usernames.delimiter value, which might be different in your configuration.</p>
</div>
</li><li class="li step stepexpand"><span class="ph cmd">Restart <span class="keyword">WebSphere Application Server for z/OS</span>.</span></li></ol></section></div><nav role="navigation" class="related-links"><div class="familylinks"><div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../Deployment_WebsphereApplicationServerOnZOS/c_WEBSPHZOS_Configuration6SecurityConfiguration1.html" title="Configure security settings for IBM Cúram Social Program Management within WebSphere Application Server for z/OS">Configuring security</a></div></div></nav></article></main></body></html>