<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us"><head><meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2022"><meta name="generator" content="DITA-OT"><meta name="description" content="Configure the JMS connection factories"><title>Configure the JMS connection factories</title><link rel="stylesheet" type="text/css" href="../commonltr.css"><link rel="stylesheet" type="text/css" href="../dita-ot-doc.css"></head><body id="d1e1"><nav class="toc" role="navigation"><ul><li><a href="../Deployment_WebsphereApplicationServer/ctr_CuramDeploymentGuideForWebsphereApplicationServer.html">Deploying on IBM  WebSphere Application Server</a><ul><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Building2BuildingEarFiles1.html">Building EAR files</a><ul><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Building2EnterpriseApplication1.html">The enterprise application EAR file</a></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Building2WebServicesApplication1.html">The web services application</a><ul><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Building2BuildingWebServicesEarFile1.html">Building the web services EAR file</a></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Building2ContentsWebServicesEarFile1.html">Contents of web services EAR file</a></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Building2WebServiceWsdl1.html">Web service WSDL</a></li></ul></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Building2MultipleEarFiles1.html">Multiple EAR files</a></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Building2AlternativeTargets1.html">Alternative targets</a></li></ul></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Configuration4WebsphereApplicationServerConfigura1.html">Configuring WebSphere Application Server</a><ul><li><a href="../Deployment_WebsphereApplicationServer/t_WEBSPHAPS_configwebsvrplugin.html">Configuring a web server plug-in</a></li></ul></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Configuration4SecurityConfiguration1.html">Configuring security</a><ul><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Configuration4SpecialConfigurationStepsWhenUsingI1.html">Configuring identity only and LDAP</a></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Configuration4WebsphereApplicationServerUserRegis1.html">User registry</a></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Configuration4LoggingAuthenticationProcess1.html">Logging the authentication process</a></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Configuration4EstablishingAlternateExcludeUsernam1.html">Establishing an alternate exclude username delimiter</a></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Configuration4WebsphereApplicationServerCachingBe1.html">WebSphere Application Server caching behavior</a></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Configuration4SecurityCustomProperties1.html">Security custom properties</a></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Configuration4SecurityHardeningMeasures1.html">Security hardening measures</a></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Configuration4SecurityCryptography.html">Cryptography</a></li></ul></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Configuration4StartingStoppingWebsphereServers1.html">Starting, stopping, and restarting IBM  WebSphere Application Server</a></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Deployment2Deployment2.html">Deploying an application</a></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Deployment2PrecompilingJsps1.html">Pre-compiling JSPs</a></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Deployment2TestingDeployment1.html">Testing the deployment</a></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Configuration3ManualWebsphereApplicationServerCon2.html">Manual WebSphere Application Server configuration</a><ul><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Configuration3AdministrativeConsole1.html">The administrative console</a></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Configuration3ScriptingSupport1.html">Scripting support</a></li><li><a href="../Deployment_WebsphereApplicationServer/t_WEBSPHAPS_Configuration3CreatingDataSourceLoginAlias1.html">Creating the data source login alias</a></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Configuration3ConfigureDbDataSources1.html">Configure Db2 data sources</a><ul><li><a href="../Deployment_WebsphereApplicationServer/t_WEBSPHAPS_Configuration3SetUpDbEnvironmentVariable1.html">Configure the Db2 environment variable</a></li><li><a href="../Deployment_WebsphereApplicationServer/t_WEBSPHAPS_Configuration3SetUpDatabaseDriverProvider1.html">Configure the database driver provider</a></li><li><a href="../Deployment_WebsphereApplicationServer/t_WEBSPHAPS_Configuration3SetUpDatabaseDriverDatasource1.html">Configure the database driver data source</a></li></ul></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Configuration3ConfigureOracleDataSource1.html">Configure an Oracle Database data source</a><ul><li><a href="../Deployment_WebsphereApplicationServer/t_WEBSPHAPS_Configuration3SetUpOracleEnvironmentVariable1.html">Configure the Oracle environment variable</a></li><li><a href="../Deployment_WebsphereApplicationServer/t_WEBSPHAPS_Configuration3SetupXaDatabaseDriver1.html">Configure the XA database driver</a></li><li><a href="../Deployment_WebsphereApplicationServer/t_WEBSPHAPS_Configuration3SetupNonxaDatabaseDriver1.html">Configure the non-XA database driver</a></li><li><a href="../Deployment_WebsphereApplicationServer/t_WEBSPHAPS_Configuration3SetUpXaDatabaseDriverDatasources1.html">Configure the XA database driver data sources</a></li><li><a href="../Deployment_WebsphereApplicationServer/t_WEBSPHAPS_Configuration3SetUpNonxaDatabaseDriverDatasource1.html">Configure the non-XA database driver data source</a></li></ul></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Configuration3SaveMasterConfiguration1.html">Save the master configuration</a></li><li><a href="../Deployment_WebsphereApplicationServer/t_WEBSPHAPS_Configuration3ConfigureAdministrationSecurity1.html">Configure administration security</a></li><li><a href="../Deployment_WebsphereApplicationServer/t_WEBSPHAPS_Configuration3ConfigureTransportLayerSecurity1.html">Configure transport layer security</a></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Configuration3RestartApplicationServer1.html">Restart the application server</a></li><li><a href="../Deployment_WebsphereApplicationServer/t_WEBSPHAPS_Configuration3ConfigureUsers1.html">Add users to the user registry</a></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Configuration3SetUpSystemJaasLoginModule1.html">Set up the system JAAS login module</a><ul><li><a href="../Deployment_WebsphereApplicationServer/t_WEBSPHAPS_Configuration3AddLoginModule1.html">Add the login module</a></li><li><a href="../Deployment_WebsphereApplicationServer/t_WEBSPHAPS_Configuration3ReorderLoginModule1.html">Reorder the login module</a></li><li><a href="../Deployment_WebsphereApplicationServer/t_WEBSPHAPS_Configuration3DisableCrossClusterAuthentication1.html">Disable cross-cluster authentication</a></li></ul></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Configuration3ServerConfiguration1.html">Configuring the server</a><ul><li><a href="../Deployment_WebsphereApplicationServer/t_WEBSPHAPS_Configuration3ConfigureYourJndiLookupPort1.html">Configure the JNDI lookup port</a></li><li><a href="../Deployment_WebsphereApplicationServer/t_WEBSPHAPS_Configuration3ConfigureYourOrbPassByReference1.html">Configure the ORB pass by reference</a></li><li><a href="../Deployment_WebsphereApplicationServer/t_WEBSPHAPS_Configuration3ConfigureYourJavaVirtualMachine1.html">Configure the Java Virtual Machine</a></li><li><a href="../Deployment_WebsphereApplicationServer/t_WEBSPHAPS_Configuration3ConfigureYourTimerService1.html">Configure the timer service</a></li><li><a href="../Deployment_WebsphereApplicationServer/t_WEBSPHAPS_Configuration3SetUpPortAccess1.html">Configure the port access</a></li><li><a href="../Deployment_WebsphereApplicationServer/t_WEBSPHAPS_Configuration3ConfigureSessionSecurityIntegration1.html">Configure session security integration</a></li></ul></li><li><a href="../Deployment_WebsphereApplicationServer/t_WEBSPHAPS_Configuration3SetupServiceIntegrationBus1.html">Configure the Service Integration Bus</a></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Configuration3JmsConfiguration1.html">Configuring JMS</a><ul><li class="active"><a href="../Deployment_WebsphereApplicationServer/t_WEBSPHAPS_Configuration3SetupJmsConnectionFactories1.html">Configure the JMS connection factories</a></li><li><a href="../Deployment_WebsphereApplicationServer/t_WEBSPHAPS_Configuration3SetupRequiredQueues1.html">Configure the required queues</a></li><li><a href="../Deployment_WebsphereApplicationServer/t_WEBSPHAPS_Configuration3SetupRequiredTopics1.html">Configure the required topics</a></li><li><a href="../Deployment_WebsphereApplicationServer/t_WEBSPHAPS_Configuration3SetupRequiredQueueActivationSpecifi1.html">Configure the required queue activation specifications</a></li><li><a href="../Deployment_WebsphereApplicationServer/t_WEBSPHAPS_Configuration3SetupRequiredTopicActivationSpecifi1.html">Configure the required topic activation specifications</a></li></ul></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Configuration3ConfigureHistoricalLogFiles1.html">Configure historical log files</a></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Configuration3PostConfiguration1.html">Post configuration tasks</a></li></ul></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Configuration3ManualApplicationDeployment1.html">Application deployment</a></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Configuration3WebsphereNetworkDeployment1.html">Network deployment</a><ul><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Configuration3CreatingProfiles1.html">Creating profiles</a></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Configuration3FederatingNode1.html">Federating a node</a></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Configuration3ConfigurationNode1.html">Configuring a node</a></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Configuration3DeployingOnNode1.html">Deploying on the Node</a></li></ul></li></ul></li></ul></nav><main role="main"><article role="article" aria-labelledby="ariaid-title1">
<h1 class="title topictitle1" id="ariaid-title1">Configure the JMS connection factories</h1>


<div class="body taskbody"><p class="shortdesc">Configure the JMS connection factories</p>
<section><ol class="ol steps"><li class="li step stepexpand"><span class="ph cmd">Navigate to
<span class="ph menucascade"><span class="ph uicontrol">Resources</span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol">JMS</span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol">JMS
providers</span></span>.</span></li><li class="li step stepexpand"><span class="ph cmd"><em class="ph i">Note:</em> The appropriate scope where the JMS resources are to be defined should be
selected.</span></li><li class="li step stepexpand"><span class="ph cmd">Select the <span class="ph uicontrol">Default messaging provider</span> link.</span></li><li class="li step stepexpand"><span class="ph cmd">Select the <span class="ph uicontrol">Connection factories</span> link in the <span class="ph uicontrol">Additional
Properties</span> section.</span></li><li class="li step stepexpand"><span class="ph cmd">Click <span class="ph uicontrol">New</span> and set the following fields:</span>
<div class="itemgroup info">
<ul class="ul">
<li class="li"><span class="ph uicontrol">Name</span>: CuramQueueConnectionFactory</li>
<li class="li"><span class="ph uicontrol">JNDI Name</span>: jms/CuramQueueConnectionFactory</li>
<li class="li"><span class="ph uicontrol">Description</span>: The factory for all connections to application queues</li>
<li class="li"><span class="ph uicontrol">Bus Name</span>: CuramBus</li>
<li class="li"><span class="ph uicontrol">Authentication alias for XA recovery</span>: Same as for the
<span class="ph tt" style="font-family: monospace">jdbc/curamdb</span> data source, for example <var class="keyword varname">&lt;SERVERNAME&gt;</var> /db admin</li>
<li class="li"><span class="ph uicontrol">Mapping-configuration alias</span>: DefaultPrinicipalMapping</li>
<li class="li"><span class="ph uicontrol">Container-managed authentication alias</span>: Same as for the Authentication
alias for XA recovery.</li>
</ul>
</div><div class="itemgroup info">
<p class="p">Leave everything else as the default and select <span class="ph uicontrol">OK</span> to apply the
changes.</p>
</div></li><li class="li step stepexpand"><span class="ph cmd">Select <span class="ph uicontrol">New</span> and set the following fields:</span>
<div class="itemgroup info">
<ul class="ul">
<li class="li"><span class="ph uicontrol">Name</span>: CuramTopicConnectionFactory</li>
<li class="li">
<p class="p"><span class="ph uicontrol">JNDI Name</span>: jms/CuramTopicConnectionFactory</p>
</li>
<li class="li"><span class="ph uicontrol">Description</span>: The factory for all connections to application queues.</li>
<li class="li"><span class="ph uicontrol">Bus Name</span>: CuramBus</li>
<li class="li"><span class="ph uicontrol">Authentication alias for XA recovery</span>: Same as for the
<span class="ph tt" style="font-family: monospace">jdbc/curamdb</span> data source, for example <var class="keyword varname">&lt;SERVERNAME&gt;</var> /db admin.</li>
<li class="li"><span class="ph uicontrol">Mapping-configuration alias</span>: DefaultPrinicipalMapping</li>
<li class="li"><span class="ph uicontrol">Container-managed authentication alias</span>: Same as for the
<span class="ph tt" style="font-family: monospace">jdbc/curamdb</span> data source, for example <var class="keyword varname">&lt;SERVERNAME&gt;</var> /dbadmin</li>
</ul>
<p class="p">Leave everything else as the default and select <span class="ph uicontrol">OK</span> to apply the
changes;</p>
</div></li><li class="li step stepexpand"><span class="ph cmd">Save the changes to the master configuration as described in <a class="xref" href="c_WEBSPHAPS_Configuration3SaveMasterConfiguration1.html" title="Save the master configuration">Save the master configuration</a>.</span></li></ol></section>
<section class="section result">
<div class="note note note_note"><span class="note__title">Note:</span> With the manual configuration steps it is not possible to correctly configure
security for the queue and topic connection factories. To complete this part of the configuration
you must use the <span class="ph tt" style="font-family: monospace">wsadmin</span> tool. To do so exit the Administrative Console and follow these
steps: <ol class="ol">
<li class="li">Identify the queue and topic connection factory entries in the WebSphere Application Server
configuration <span class="ph filepath">resources.xml</span> file. This file resides in the
<span class="ph filepath">%WAS_HOME%\profiles\&lt;profile_name&gt;\config</span> file system hierarchy depending
on your naming conventions and the scope where you defined your JMS resources. For instance, using a
node-level scope with a profile name of <span class="ph tt" style="font-family: monospace">AppSrv01</span>, a cell name of <span class="ph tt" style="font-family: monospace">MyNodeCell</span> and a
node name of <span class="ph tt" style="font-family: monospace">MyNode</span> you would find this file here:
<span class="ph filepath">C:\WebSphere\profiles\AppSrv01\config\cells\MyNodeCell\nodes\MyNode\resources.xml</span>.
In this file you must find the <span class="ph tt" style="font-family: monospace">&lt;factories&gt;</span> entities for the
<span class="ph tt" style="font-family: monospace">CuramQueueConnectionFactory</span> and <span class="ph tt" style="font-family: monospace">CuramTopicConnectionFactory</span> and make note of the
ID for each that begins <span class="ph tt" style="font-family: monospace">J2CConnectionFactory_</span> followed by a numeric (e.g.
1264085551611).</li>
<li class="li">Invoke the <span class="ph tt" style="font-family: monospace">wsadmin</span> WebSphere script. In these examples the language is JACL, so the
<em class="ph i">-lang jacl</em> argument may need to be specified along with login credentials, etc. depending on
your local configuration.</li>
<li class="li">In <span class="ph tt" style="font-family: monospace">wsadmin</span> invoke the following commands; again, assuming node-scope definitions, a
cell name of <span class="ph tt" style="font-family: monospace">MyNodeCell</span>, and a node name of <span class="ph tt" style="font-family: monospace">MyNode</span>, the resource IDs will be
different in your environment. <ol class="ol" type="a">
<li class="li">Get the node and cell identifier: <span class="ph tt" style="font-family: monospace">$AdminConfig getid /Node:MyNode</span></li>
<li class="li">Using the node and cell identifier from the previous step, combine it and the connection factory
identifier you obtained above to display the connection factory: <span class="ph tt" style="font-family: monospace">$AdminTask
showSIBJMSConnectionFactory
CuramQueueConnectionFactory(cells/MyNodeCell/nodes/MyNode|resources.xml#J2CConnectionFactory_1264085551611)</span>
<p class="p">From the above command output you should verify that authDataAlias is not set (e.g.
<span class="ph tt" style="font-family: monospace">authDataAlias=</span>), else you're done, as shown in this sample wsadmin output:</p><figure class="fig fignone">
<pre class="pre">{password=, logMissingTransactionContext=false,
readAhead=Default, providerEndpoints=,
shareDurableSubscriptions=InCluster,
targetTransportChain=, authDataAlias=, userName=,
targetSignificance=Preferred,
shareDataSourceWithCMP=false,
nonPersistentMapping=ExpressNonPersistent,
persistentMapping=ReliablePersistent, clientID=,
jndiName=jms/CuramQueueConnectionFactory,
manageCachedHandles=false,
consumerDoesNotModifyPayloadAfterGet=false,
category=, targetType=BusMember, busName=CuramBus,
description=None,
xaRecoveryAuthAlias=crouch/databaseAlias,
temporaryTopicNamePrefix=, remoteProtocol=,
producerDoesNotModifyPayloadAfterSet=false,
connectionProximity=Bus, target=,
temporaryQueueNamePrefix=,
name=CuramQueueConnectionFactory}</pre>
</figure></li>
<li class="li">To set the authDataAlias use the same connection factory information as above; e.g.:
<span class="ph tt" style="font-family: monospace">$AdminTask modifySIBJMSConnectionFactory
CuramQueueConnectionFactory(cells/MyNodeCell/nodes/MyNode|resources.xml#J2CConnectionFactory_1264085551611)
{-authDataAlias crouch/databaseAlias}</span></li>
<li class="li">Save the changes: <span class="ph tt" style="font-family: monospace">$AdminConfig save</span></li>
<li class="li">You can invoke the <span class="ph tt" style="font-family: monospace">showSIBJMSConnectionFactory</span> command to verify the change.</li>
<li class="li">Repeat the steps for the <span class="ph tt" style="font-family: monospace">CuramTopicConnectionFactory</span>.</li>
<li class="li">Restart the application server.</li>
</ol></li>
</ol></div>
</section>
</div>
<nav role="navigation" class="related-links"><div class="familylinks"><div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Configuration3JmsConfiguration1.html" title="Configure JMS components for example, queues and topics.">Configuring JMS</a></div></div></nav></article></main></body></html>