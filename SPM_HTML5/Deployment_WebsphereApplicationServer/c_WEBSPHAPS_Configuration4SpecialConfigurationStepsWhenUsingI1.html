<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us"><head><meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2022"><meta name="generator" content="DITA-OT"><meta name="description" content="Configure IBM WebSphere Application Server with the Ant configure target to use identity only and LDAP"><title>Configuring identity only and LDAP</title><link rel="stylesheet" type="text/css" href="../commonltr.css"><link rel="stylesheet" type="text/css" href="../dita-ot-doc.css"></head><body id="d1e629"><nav class="toc" role="navigation"><ul><li><a href="../Deployment_WebsphereApplicationServer/ctr_CuramDeploymentGuideForWebsphereApplicationServer.html">Deploying on IBM  WebSphere Application Server</a><ul><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Building2BuildingEarFiles1.html">Building EAR files</a><ul><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Building2EnterpriseApplication1.html">The enterprise application EAR file</a></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Building2WebServicesApplication1.html">The web services application</a><ul><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Building2BuildingWebServicesEarFile1.html">Building the web services EAR file</a></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Building2ContentsWebServicesEarFile1.html">Contents of web services EAR file</a></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Building2WebServiceWsdl1.html">Web service WSDL</a></li></ul></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Building2MultipleEarFiles1.html">Multiple EAR files</a></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Building2AlternativeTargets1.html">Alternative targets</a></li></ul></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Configuration4WebsphereApplicationServerConfigura1.html">Configuring WebSphere Application Server</a><ul><li><a href="../Deployment_WebsphereApplicationServer/t_WEBSPHAPS_configwebsvrplugin.html">Configuring a web server plug-in</a></li></ul></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Configuration4SecurityConfiguration1.html">Configuring security</a><ul><li class="active"><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Configuration4SpecialConfigurationStepsWhenUsingI1.html">Configuring identity only and LDAP</a></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Configuration4WebsphereApplicationServerUserRegis1.html">User registry</a></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Configuration4LoggingAuthenticationProcess1.html">Logging the authentication process</a></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Configuration4EstablishingAlternateExcludeUsernam1.html">Establishing an alternate exclude username delimiter</a></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Configuration4WebsphereApplicationServerCachingBe1.html">WebSphere Application Server caching behavior</a></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Configuration4SecurityCustomProperties1.html">Security custom properties</a></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Configuration4SecurityHardeningMeasures1.html">Security hardening measures</a></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Configuration4SecurityCryptography.html">Cryptography</a></li></ul></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Configuration4StartingStoppingWebsphereServers1.html">Starting, stopping, and restarting IBM  WebSphere Application Server</a></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Deployment2Deployment2.html">Deploying an application</a></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Deployment2PrecompilingJsps1.html">Pre-compiling JSPs</a></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Deployment2TestingDeployment1.html">Testing the deployment</a></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Configuration3ManualWebsphereApplicationServerCon2.html">Manual WebSphere Application Server configuration</a><ul><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Configuration3AdministrativeConsole1.html">The administrative console</a></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Configuration3ScriptingSupport1.html">Scripting support</a></li><li><a href="../Deployment_WebsphereApplicationServer/t_WEBSPHAPS_Configuration3CreatingDataSourceLoginAlias1.html">Creating the data source login alias</a></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Configuration3ConfigureDbDataSources1.html">Configure Db2 data sources</a><ul><li><a href="../Deployment_WebsphereApplicationServer/t_WEBSPHAPS_Configuration3SetUpDbEnvironmentVariable1.html">Configure the Db2 environment variable</a></li><li><a href="../Deployment_WebsphereApplicationServer/t_WEBSPHAPS_Configuration3SetUpDatabaseDriverProvider1.html">Configure the database driver provider</a></li><li><a href="../Deployment_WebsphereApplicationServer/t_WEBSPHAPS_Configuration3SetUpDatabaseDriverDatasource1.html">Configure the database driver data source</a></li></ul></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Configuration3ConfigureOracleDataSource1.html">Configure an Oracle Database data source</a><ul><li><a href="../Deployment_WebsphereApplicationServer/t_WEBSPHAPS_Configuration3SetUpOracleEnvironmentVariable1.html">Configure the Oracle environment variable</a></li><li><a href="../Deployment_WebsphereApplicationServer/t_WEBSPHAPS_Configuration3SetupXaDatabaseDriver1.html">Configure the XA database driver</a></li><li><a href="../Deployment_WebsphereApplicationServer/t_WEBSPHAPS_Configuration3SetupNonxaDatabaseDriver1.html">Configure the non-XA database driver</a></li><li><a href="../Deployment_WebsphereApplicationServer/t_WEBSPHAPS_Configuration3SetUpXaDatabaseDriverDatasources1.html">Configure the XA database driver data sources</a></li><li><a href="../Deployment_WebsphereApplicationServer/t_WEBSPHAPS_Configuration3SetUpNonxaDatabaseDriverDatasource1.html">Configure the non-XA database driver data source</a></li></ul></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Configuration3SaveMasterConfiguration1.html">Save the master configuration</a></li><li><a href="../Deployment_WebsphereApplicationServer/t_WEBSPHAPS_Configuration3ConfigureAdministrationSecurity1.html">Configure administration security</a></li><li><a href="../Deployment_WebsphereApplicationServer/t_WEBSPHAPS_Configuration3ConfigureTransportLayerSecurity1.html">Configure transport layer security</a></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Configuration3RestartApplicationServer1.html">Restart the application server</a></li><li><a href="../Deployment_WebsphereApplicationServer/t_WEBSPHAPS_Configuration3ConfigureUsers1.html">Add users to the user registry</a></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Configuration3SetUpSystemJaasLoginModule1.html">Set up the system JAAS login module</a><ul><li><a href="../Deployment_WebsphereApplicationServer/t_WEBSPHAPS_Configuration3AddLoginModule1.html">Add the login module</a></li><li><a href="../Deployment_WebsphereApplicationServer/t_WEBSPHAPS_Configuration3ReorderLoginModule1.html">Reorder the login module</a></li><li><a href="../Deployment_WebsphereApplicationServer/t_WEBSPHAPS_Configuration3DisableCrossClusterAuthentication1.html">Disable cross-cluster authentication</a></li></ul></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Configuration3ServerConfiguration1.html">Configuring the server</a><ul><li><a href="../Deployment_WebsphereApplicationServer/t_WEBSPHAPS_Configuration3ConfigureYourJndiLookupPort1.html">Configure the JNDI lookup port</a></li><li><a href="../Deployment_WebsphereApplicationServer/t_WEBSPHAPS_Configuration3ConfigureYourOrbPassByReference1.html">Configure the ORB pass by reference</a></li><li><a href="../Deployment_WebsphereApplicationServer/t_WEBSPHAPS_Configuration3ConfigureYourJavaVirtualMachine1.html">Configure the Java Virtual Machine</a></li><li><a href="../Deployment_WebsphereApplicationServer/t_WEBSPHAPS_Configuration3ConfigureYourTimerService1.html">Configure the timer service</a></li><li><a href="../Deployment_WebsphereApplicationServer/t_WEBSPHAPS_Configuration3SetUpPortAccess1.html">Configure the port access</a></li><li><a href="../Deployment_WebsphereApplicationServer/t_WEBSPHAPS_Configuration3ConfigureSessionSecurityIntegration1.html">Configure session security integration</a></li></ul></li><li><a href="../Deployment_WebsphereApplicationServer/t_WEBSPHAPS_Configuration3SetupServiceIntegrationBus1.html">Configure the Service Integration Bus</a></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Configuration3JmsConfiguration1.html">Configuring JMS</a><ul><li><a href="../Deployment_WebsphereApplicationServer/t_WEBSPHAPS_Configuration3SetupJmsConnectionFactories1.html">Configure the JMS connection factories</a></li><li><a href="../Deployment_WebsphereApplicationServer/t_WEBSPHAPS_Configuration3SetupRequiredQueues1.html">Configure the required queues</a></li><li><a href="../Deployment_WebsphereApplicationServer/t_WEBSPHAPS_Configuration3SetupRequiredTopics1.html">Configure the required topics</a></li><li><a href="../Deployment_WebsphereApplicationServer/t_WEBSPHAPS_Configuration3SetupRequiredQueueActivationSpecifi1.html">Configure the required queue activation specifications</a></li><li><a href="../Deployment_WebsphereApplicationServer/t_WEBSPHAPS_Configuration3SetupRequiredTopicActivationSpecifi1.html">Configure the required topic activation specifications</a></li></ul></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Configuration3ConfigureHistoricalLogFiles1.html">Configure historical log files</a></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Configuration3PostConfiguration1.html">Post configuration tasks</a></li></ul></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Configuration3ManualApplicationDeployment1.html">Application deployment</a></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Configuration3WebsphereNetworkDeployment1.html">Network deployment</a><ul><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Configuration3CreatingProfiles1.html">Creating profiles</a></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Configuration3FederatingNode1.html">Federating a node</a></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Configuration3ConfigurationNode1.html">Configuring a node</a></li><li><a href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Configuration3DeployingOnNode1.html">Deploying on the Node</a></li></ul></li></ul></li></ul></nav><main role="main"><article role="article" aria-labelledby="ariaid-title1">
<h1 class="title topictitle1" id="ariaid-title1">Configuring identity only and LDAP</h1>


<div class="body conbody"><p class="shortdesc">Configure <span class="keyword">IBM®
WebSphere® Application Server</span> with
the Ant <span class="keyword cmdname">configure</span> target to use identity only and LDAP</p>
<section class="section" id="d1e629__section_whw_411_z3b"><h2 class="title sectiontitle">About this task</h2>

<p class="p">To configure <span class="keyword">WebSphere Application Server</span> with the
Ant <span class="keyword cmdname">configure</span> target to use identity only and LDAP, set the
<var class="keyword varname">curam.security.check.identity.only</var> property to true in
<span class="ph filepath">AppServer.properties</span> before running the Ant <span class="keyword cmdname">configure</span>
target. This step configures the CuramLoginModule behavior to be compatible with the identity only
and LDAP authentication mechanism. For a previously configured server see the steps in <a class="xref" href="c_WEBSPHAPS_Configuration3SetUpSystemJaasLoginModule1.html" title="Application security uses a JAAS (Java Authentication and Authorization Service) login module for authentication. This login module must be configured for the DEFAULT, WEB_INBOUND and RMI_INBOUND configurations. Repeat the steps for each of these configurations.">Set up the system JAAS login module</a>. to set the corresponding
<var class="keyword varname">CuramLoginModule</var>
<var class="keyword varname">check_identity_only</var> property.</p>
<p class="p">However, when using identity only in combination with <span class="keyword">WebSphere Application Server</span> and LDAP you might need to
perform additional manual configuration steps; this is regardless of whether configuration is done
using the <span class="keyword">WebSphere Application Server</span> Administrative
Console or the Ant <span class="keyword cmdname">configure</span> target. For more information, see <a class="xref" href="../Security/c_SECHAND_Authentication1IdentityOnlyAuthentication1.html"> Identity Only Authentication</a>.</p>
<p class="p"><strong class="ph b">Troubleshooting Identity Only and LDAP</strong></p>
<p class="p">With this combination you may find that <span class="keyword">WebSphere Application Server</span> fails to start successfully
because you must add a WebSphere Application Server for z/OS-generated username to the login module
exclude list property (exclude_usernames) described in <a class="xref" href="c_WEBSPHAPS_Configuration3SetUpSystemJaasLoginModule1.html" title="Application security uses a JAAS (Java Authentication and Authorization Service) login module for authentication. This login module must be configured for the DEFAULT, WEB_INBOUND and RMI_INBOUND configurations. Repeat the steps for each of these configurations.">Set up the system JAAS login module</a>. If the application server fails
to start there will be a SECJ0270E error message in the <span class="ph filepath">SystemOut.log</span> file
before the failure.</p>
<p class="p">These are the steps needed to resolve this error:</p>
</section>
<section class="section" id="d1e629__section_smf_t11_z3b">
<ol class="ol" id="d1e629__ol_n51_511_z3b">
<li class="li">Identify the username that is causing the application server start to fail. Configure the login
module trace as described in <a class="xref" href="c_WEBSPHAPS_Configuration4LoggingAuthenticationProcess1.html" title="Trace entries of the CuramLoginModule authentication process can be generated in SystemOut.log and these can be helpful for debugging.&nbsp;">Logging the authentication process</a> (in regard to the
<span class="ph tt" style="font-family: monospace">configure</span> target) or <a class="xref" href="t_WEBSPHAPS_Configuration3AddLoginModule1.html" title="Add the login module.">Add the login module</a> (in
regard to configuring via the Administrative Console), and restart WebSphere Application Server.
With the login module trace running, prior to the SECJ0270E error in the
<span class="ph filepath">SystemOut.log</span> file, the trace data will identify the failing username with a
record like this:<figure class="fig fignone" id="d1e629__fig_o51_511_z3b">
<pre class="pre">SystemOut     O Username: server:MyNodeCell_MyNode_CuramServer</pre>
</figure>
<p class="p">Where "MyNode" is the node name, "MyNodeCell" is the cell name, and "CuramServer" is the
WebSphere server name. Following the login module trace data will be the error, which will look like
this:</p><figure class="fig fignone" id="d1e629__fig_p51_511_z3b">
<pre class="pre">SECJ0270E: Failed to get actual credentials.
   The exception is javax.security.auth.login.LoginException:
   Context: MyNodeCell/nodes/MyNode/servers/CuramServer,
   name: curamejb/LoginHome:
   First component in name curamejb/LoginHome not found.</pre>
</figure></li>
<li class="li">Specify the failing username in the login module exclude_usernames property in the WebSphere
Application Server configuration. Since WebSphere Application Server is failing to start you cannot
make this change via the Administrative Console and you must edit the WebSphere Application Server
configuration file directly. In the WebSphere Application Server configuration file system edit
<span class="ph filepath">config\cells\MyNodeCell\security.xml</span>, which will have three occurrences of the
exclude_usernames property (one for each alias); e.g.:<figure class="fig fignone" id="d1e629__fig_q51_511_z3b">
<pre class="pre">&lt;options xmi:id="Property_1301940482165"
   name="exclude_usernames"
   value="websphere,db2admin"
   required="false"/&gt;</pre>
</figure>
<p class="p">You must modify the three occurrences to include the newly identified username from the trace
entry above; e.g.:</p><figure class="fig fignone" id="d1e629__fig_r51_511_z3b">
<pre class="pre">&lt;options xmi:id="Property_1301940482165"
   name="exclude_usernames"
   value="websphere,db2admin,server:MyNodeCell_MyNode_CuramServer"
   required="false"/&gt;</pre>
</figure>
<p class="p">Note that in the exclude_usernames occurrences the id attribute will vary per your system
configuration and the comma separator in the example value attribute represents the default
curam.security.usernames.delimiter value, which may be different in your case.</p></li>
<li class="li">Restart WebSphere Application Server.</li>
</ol>
</section>
</div>
<nav role="navigation" class="related-links"><div class="familylinks"><div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../Deployment_WebsphereApplicationServer/c_WEBSPHAPS_Configuration4SecurityConfiguration1.html" title="The default security configuration of IBM Cúram Social Program Management involves the default file-based user registry and a JAAS Login Module. For more information, see the Default Configuration for IBM WebSphere Application Server section in the Cúram Security Handbook.">Configuring security</a></div></div></nav></article></main></body></html>